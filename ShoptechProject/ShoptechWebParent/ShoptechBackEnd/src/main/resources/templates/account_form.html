<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Tech Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" th:href="@{/assets/vendors/mdi/css/materialdesignicons.min.css}">
    <link rel="stylesheet" th:href="@{/assets/vendors/css/vendor.bundle.base.css}">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" th:href="@{/assets/vendors/jvectormap/jquery-jvectormap.css}">
    <link rel="stylesheet" th:href="@{/assets/vendors/flag-icon-css/css/flag-icon.min.css}">
    <link rel="stylesheet" th:href="@{/assets/vendors/owl-carousel-2/owl.carousel.min.css}">
    <link rel="stylesheet" th:href="@{/assets/vendors/owl-carousel-2/owl.theme.default.min.css}">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" th:href="@{/assets/css/style.css}">
    <script th:src="@{/richtext/jquery.richtext.js}"></script>
    <link rel="stylesheet" th:href="@{/richtext/richtext.css}">
    <!-- End layout styles -->
    <link rel="shortcut icon" th:href="@{/assets/images/favicon.png}"/>
</head>
<body>
<div class="container-scroller">
    <nav th:replace="~{sidebar :: side_bar}"></nav>
    <div class="main-panel">
        <!-- partial:partials/_footer.html -->
        <!-- Trang Chủ-->
        <article layout:fragment="content">
            <div th:if="${message != null}" class="alert alert-success text-center">
                [[${message}]]
            </div>
            <div class="container rounded bg-white mt-5 mb-5">
                <div class="row">
                    <div class="col-md-3 border-right">
                        <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                            <img style="padding-bottom: 10px" class="rounded-circle mt-5 img-fluid" width="150px" id="thumbnail1"
                                 alt="Photos preview" th:src="@{${user.photosImagePath}}"/>
                            <span style="color:black; padding-bottom: 6px;" type="text" class="font-weight-bold"
                                  th:text="${user.firstName} + ${user.lastName}"></span>
                            <span class="text-black-50" th:text="${user.email}"></span>
                            <span>
              </span>
                        </div>
                    </div>
                    <div class="col-md-5 border-right">
                        <div class="p-3 py-5">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h2 style="color: black" class="text-right">Profile Settings</h2>
                            </div>
                            <form th:action="@{/account/update}" th:object="${user}" method="post"
                                  enctype="multipart/form-data">
                                <input type="hidden" th:field="*{id}"/>
                                <div class="row mt-2">
                                    <div class="col-md-6"><label style="color:black" class="labels">Tên</label> <input
                                            style="color:white"
                                            type="text"
                                            class="form-control p_input"
                                            th:field="*{firstName}"
                                            required
                                            minlength="2"
                                            maxlength="45"></div>
                                    <div class="col-md-6"><label style="color:black" class="labels">Họ và tên
                                        đệm</label> <input
                                            style="color:white" type="text" class="form-control p_input"
                                            th:field="*{lastName}" required minlength="2" maxlength="45"></div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12"><label style="color:black; padding-top: 10px;"
                                                                  class="labels">E-mail</label><input
                                            style="color:black" type="email" class="form-control p_input"
                                            th:field="*{email}" readonly="readonly"></div>
                                    <div class="col-md-12"><label style="color:black; padding-top: 10px; "
                                                                  class="labels">Mật khẩu</label>
                                        <input style="color:white" type="password" class="form-control p_input"
                                               th:field="*{password}" placeholder="để trống nếu không thay đổi"
                                               minlength="8" maxlength="20"
                                               oninput="checkPasswordMatch(document.getElementById('confirmPassword'))">
                                    </div>
                                    <div class="col-md-12"><label style="color:black; padding-top: 10px;"
                                                                  class="labels">Nhập lại mật khẩu</label>
                                        <input style="color:white" type="password" class="form-control p_input"
                                               id="confirmPassword" placeholder="nhập lại mật khẩu"
                                               minlength="8" maxlength="20"
                                               oninput="checkPasswordMatch(this)">
                                    </div>

                                    <div class="col-md-12"><label style="color:black; padding-top: 10px;"
                                                                  class="labels">Chức vụ: </label>
                                        <span><b style="color:black">[[${user.roles}]]</b></span>
                                    </div>
                                    <div class="col-md-12"><label style="color:black; padding-top: 10px;"
                                                                  class="labels">Hình ảnh: </label>
                                        <input type="hidden" th:field="*{photos}"/>
                                        <input type="file" id="fileImage" name="image" accept="image/jpeg, image/png "
                                               class="mb-2"/>
                                        <img id="thumbnail" alt="Photos preview" th:src="@{${user.photosImagePath}}"
                                             class="img-fluid"/>
                                    </div>
                                </div>
                                <div class="mt-5 text-center">
                                    <button type="submit" class="btn btn-primary btn-block enter-btn">Submit</button>
                                    <button type="button" class="btn btn-secondary btn-block enter-btn cancel-link">
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </div>
</div>

</article>
<!-- partial -->
</div>
<!-- main-panel ends -->
</div>
<!-- page-body-wrapper ends -->
</div>
<!-- container-scroller -->
<!-- plugins:js -->
<script th:src="@{/assets/vendors/js/vendor.bundle.base.js}"></script>
<!-- endinject -->
<!-- Plugin js for this page -->
<script th:src="@{/assets/vendors/chart.js/Chart.min.js}"></script>
<script th:src="@{/assets/vendors/progressbar.js/progressbar.min.js}"></script>
<script th:src="@{/assets/vendors/jvectormap/jquery-jvectormap.min.js}"></script>
<script th:src="@{/assets/vendors/jvectormap/jquery-jvectormap-world-mill-en.js}"></script>
<script th:src="@{/assets/vendors/owl-carousel-2/owl.carousel.min.js}"></script>
<script th:src="@{/assets/js/jquery.cookie.js}" type="text/javascript}"></script>
<!-- End plugin js for this page -->
<!-- inject:js -->
<script th:src="@{/assets/js/off-canvas.js}"></script>
<script th:src="@{/assets/js/hoverable-collapse.js}"></script>
<script th:src="@{/assets/js/misc.js}"></script>
<script th:src="@{/assets/js/settings.js}"></script>
<script th:src="@{/assets/js/todolist.js}"></script>
<!-- endinject -->
<!-- Custom js for this page -->
<script th:src="@{assets/js/dashboard.js}"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<!-- End custom js for this page -->
<script type="text/javascript">

    document.addEventListener('DOMContentLoaded', function () {
        var logoutLink = document.querySelector('.cancel-link');
        logoutLink.addEventListener('click', function () {
            window.location.href = '/admin/home';
        });
    });

    MAX_FILE_SIZE = 102400; // 100KB
    function showImageThumbnail(fileInput) {
        var file = fileInput.file[0];
        var reader = new FileReader();
        reader.onload = function (e) {
            $("#thumbnail").attr("src", e.target.result);
        };
        reader.readAsDataURL(file);
    }

    function checkPasswordMatch(confirmPassword) {

        /*
            $("#password") selector refers to the input tag with th:field="*{password}"
        */
        if (confirmPassword.value != $("#password").val()) {
            confirmPassword.setCustomValidity("mật khẩu không trùng khớp!");

        } else {
            confirmPassword.setCustomValidity("");
        }

    }

</script>
<script th:src="@{/js/common_form.js}"></script>
</body>
</html>




